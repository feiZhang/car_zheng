<include file="public:header"/>

<link href="__PUBLIC__/public/sigma_grid/gt_grid.css" rel="stylesheet" type="text/css" />
<link href="__PUBLIC__/public/sigma_grid/skin/default/skinstyle.css" rel="stylesheet" type="text/css" />
<link href="__PUBLIC__/public/sigma_grid/skin/mac/skinstyle.css" rel="stylesheet" type="text/css" />
<link href="__PUBLIC__/public/sigma_grid/skin/vista/skinstyle.css" rel="stylesheet" type="text/css" />
<link href="__PUBLIC__/public/sigma_grid/skin/pink/skinstyle.css" rel="stylesheet" type="text/css" />
<script src="__PUBLIC__/public/sigma_grid/gt_grid_all.js" type="text/javascript"></script>
<script src="__PUBLIC__/public/sigma_grid/gt_msg_cn.js" type="text/javascript"></script>


<script src="__PUBLIC__/public/DataOpe.js"></script>
<script src="__PUBLIC__/js/dataope_ext.js"></script>
<!-- 显示数据列表 -->
<script type="text/template" id="item-add-template">
	<div id="data_add" style="min-height: 30px;">
		<div id="opeButton" style="float:right;width:200px">
		<% if (!readOnly) { %>
            <input class="d-button d-state-highlight" id='item_add' type="button" value="新增<%= modelTitle %>" />
		<% }%>
    	<%
        if(otherManageAction){
            print(otherManageAction);
        }
        %>
		</div>
		<div>
			<div id='query_items' style=""></div>
		</div>
	</div>
</script>  

<script>
$(function(){
	var dxGrid	= new $.dxGrid();
	$.get("__URL__/get_searchfields",function(msg){
		if(msg['status'] != 0)
		{
			//{modelTitle:"用户",readOnly:false,otherManageAction:"",query_items:[{enname:"title",cnname:"标题",type:"string"},{enname:"create_time",cnname:"成立日期",type:"time"}]}
			dxGrid.showHeaderOpe(msg['data']);
		}
	},"json");
	//新增数据的对话框
	$("#item_add").click(function(){
		
	});

	var gridFields		= [];
	var datasetFields	= [];
	dxGrid.init("dataList","",gridFields,datasetFields,"dataListCon");
	$.get("__URL__/get_fieldslist",function(msg){
			if(msg['status'] != 0)
			{
				dxGrid.setGridFields(msg['data']['gridFields']);
				dxGrid.setDataSetFields(msg["data"]["datasetFields"]);
				dxGrid.setData("__URL__/get_datalist");
				dxGrid.showGrid();
			}
		},"json");
});
</script>

<div id="dataListCon">
	<div id="dataList"></div>
</div>

<include file="public:footer"/>
